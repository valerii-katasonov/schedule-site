<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
  <title>Розклад уроків</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    body {
        font-family: 'Montserrat', sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        min-height: 100vh;
        transition: background 0.5s ease;
    }

    body.dark-theme {
        background: linear-gradient(135deg, #002b33 0%, #004d57 100%); /* Оновлений фон для темного режиму */
        color: #fff;
    }

    header {
        background: linear-gradient(45deg, #00bfd1, #006d77); /* Світла тема */
        color: white;
        padding: 1.5em 0;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        position: relative;
    }

    body.dark-theme header {
        background: linear-gradient(45deg, #003d44, #006d77); /* Темна тема */
    }

    header img {
        width: 100px;
        height: 100px;
        border-radius: 20px;
        border: 3px solid rgba(255,255,255,0.2);
        animation: fadeIn 1s ease-in;
    }

    header h1 {
        font-size: 2em;
        margin: 0;
        font-weight: 700;
        text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        animation: fadeIn 1s ease-in;
    }

    .theme-toggle, .notify-toggle {
        position: absolute;
        top: 20px;
        background: none;
        border: none;
        color: white;
        font-size: 1.5em;
        cursor: pointer;
    }

    .theme-toggle { right: 60px; }
    .notify-toggle { right: 20px; }

    .container {
        max-width: 2000px;
        margin: 30px auto;
        padding: 0 20px;
        display: flex;
        gap: 30px;
        justify-content: center;
        animation: fadeInUp 0.8s ease-in;
    }

    .current-lesson {
        font-size: 1.4em;
        color: #1a1a66;
        background: white;
        border-left: 6px solid #4CAF50;
        padding: 20px;
        margin: 0 0 25px;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    body.dark-theme .current-lesson {
        background: #333;
        color: #fff;
    }

    .current-lesson:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }

    .day-filter {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
    }

    .day-filter button {
        padding: 8px 15px;
        border: none;
        background: #f8f9fa;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    .day-filter button.active {
        background: #4CAF50;
        color: white;
    }

    body.dark-theme .day-filter button {
        background: #555;
        color: #fff;
    }

    body.dark-theme .day-filter button.active {
        background: #66BB6A;
    }

    table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-bottom: 25px;
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }

    body.dark-theme table {
        background: #444;
        color: #fff;
    }

    th, td {
        padding: 12px 15px;
        text-align: center;
        border-bottom: 1px solid rgba(0,0,0,0.05);
    }

    body.dark-theme th, body.dark-theme td {
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    th {
        background: #f8f9fa;
        font-weight: 600;
        color: #333;
    }

    body.dark-theme th {
        background: #555;
    }

    .highlight {
        background: #f5f5f5;
        font-style: italic;
    }

    body.dark-theme .highlight {
        background: #555;
    }

    .monday { background: rgba(173, 216, 230, 0.6); } /* Світло-голубий */
    .tuesday { background: rgba(144, 238, 144, 0.6); } /* Світло-зелений */
    .wednesday { background: rgba(255, 255, 224, 0.6); } /* Світло-жовтий */
    .thursday { background: rgba(255, 218, 185, 0.6); } /* Світло-оранжевий */
    .friday { background: rgba(255, 192, 203, 0.6); } /* Світло-рожевий */
    .current-day { background: rgba(76, 175, 80, 0.3); }

    .tables-container {
        padding: 25px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        margin: 0;
    }

    body.dark-theme .tables-container {
        background: #333;
    }

    .links-container {
        padding: 25px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        max-width: 350px;
        transition: transform 0.3s ease;
    }

    body.dark-theme .links-container {
        background: #333;
    }

    .links-container:hover {
        transform: translateY(-5px);
    }

    .links-container h3 {
        color: #1a1a66;
        margin: 0 0 15px;
        font-size: 1.2em;
    }

    body.dark-theme .links-container h3 {
        color: #fff;
    }

    .links-container a {
        color: #2d2d99;
        text-decoration: none;
        transition: color 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 0;
    }

    body.dark-theme .links-container a {
        color: #4CAF50;
    }

    .links-container a:hover {
        color: #4CAF50;
    }

    body.dark-theme .links-container a:hover {
        color: #66BB6A;
    }

    .image-container-right {
        padding: 20px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        max-width: 450px;
        transition: transform 0.3s ease;
    }

    body.dark-theme .image-container-right {
        background: #333;
    }

    .image-container-right:hover {
        transform: translateY(-5px);
    }

    .google-image {
        width: 100%;
        border-radius: 10px;
        cursor: pointer;
        transition: transform 0.3s ease;
        touch-action: pinch-zoom;
    }

    h2 {
        color: #1a1a66;
        font-size: 1.6em;
        margin: 0 0 20px;
        text-align: center;
    }

    body.dark-theme h2 {
        color: #fff;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @media screen and (max-width: 900px) {
        .container {
            flex-direction: column;
            padding: 0 15px;
        }

        .links-container, .image-container-right {
            max-width: 100%;
            margin: 0 0 20px;
        }

        .tables-container {
            width: 100%;
        }

        header {
            padding: 1em 0;
        }

        header img {
            width: 80px;
            height: 80px;
        }

        .day-filter {
            flex-wrap: wrap;
        }
    }
  </style>
</head>
<body>
  <header>
    <img src="https://i.postimg.cc/WbY9TdDp/PushIco.png" alt="Push School Logo">
    <h1>Розклад уроків<br>1 клас<br>Push School Warsaw</h1>
    <button class="theme-toggle" aria-label="Переключити тему"><i class="fas fa-moon"></i></button>
    <button class="notify-toggle" aria-label="Увімкнути сповіщення"><i class="fas fa-bell"></i></button>
  </header>
  <div class="container">
    <div class="links-container">
      <h3>Корисні посилання:</h3>
      <ul>
        <li><a href="https://prosvita.net/" target="_blank"><i class="fas fa-link"></i> Просвіта</a></li>
      </ul>
      <h3>Підручники:</h3>
      <ul>
        <li><a href="https://online.flipbuilder.com/sdtta/acov/" target="_blank"><i class="fas fa-book"></i> Academy Stars 1: Pupil's book</a></li>
        <li><a href="https://online.flipbuilder.com/sdtta/mxjn/" target="_blank"><i class="fas fa-book"></i> Academy Stars 1: Workbook</a></li>
        <li><a href="https://shkola.in.ua/1185-bukvar-1-klas-ponomarova-2018-chastyna-1.html" target="_blank"><i class="fas fa-book"></i> Буквар 1 клас (частина 1) / Пономарьова</a></li>
        <li><a href="https://shkola.in.ua/1186-bukvar-1-klas-ponomarova-2018-chastyna-2.html" target="_blank"><i class="fas fa-book"></i> Буквар 1 клас (частина 2)Gabriela Ponomarova</a></li>
        <li><a href="https://znayshov.com/FR/12164/Propisi_1kl_Ponomarova_2.pdf" target="_blank"><i class="fas fa-book"></i> Мій перший зошит. Прописи. 1 клас / Гусельнікова</a></li>
        <li><a href="https://shkola.in.ua/2808-matematyka-1-klas-his-2023.html" target="_blank"><i class="fas fa-book"></i> Математика 1 клас / Гісь</a></li>
      </ul>
    </div>
    <div class="tables-container">
      <div class="current-lesson" id="current-lesson" role="alert">Зараз немає уроків.</div>
      <h2>Розклад на сьогодні</h2>
      <div class="day-filter" id="day-filter"></div>
      <table id="daily-schedule" role="grid">
        <thead>
          <tr>
            <th>№</th>
            <th>Урок</th>
            <th>Час</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <h2>Розклад на тиждень</h2>
      <table role="grid">
        <thead>
          <tr>
            <th>День</th>
            <th>№</th>
            <th>Урок</th>
            <th>Час</th>
          </tr>
        </thead>
        <tbody id="weekly-schedule"></tbody>
      </table>
    </div>
    <div class="image-container-right">
      <img class="google-image" src="https://i.postimg.cc/W1RVp0n2/2.png" alt="Google Drive Image">
    </div>
  </div>

  <script>
const schedule = {
  "Понеділок": [
    { number: 1, subject: "Навчання грамоти", time: "9:00 - 9:45" },
    { number: " ", subject: "Перерва", time: "9:45 - 9:55" },
    { number: 2, subject: "Навчання грамоти", time: "9:55 - 10:40" },
    { number: " ", subject: "Перерва", time: "10:40 - 10:50" },
    { number: 3, subject: "Математика", time: "10:50 - 11:35" },
    { number: " ", subject: "Обід 1-4 класи", time: "11:35 - 11:55" },
    { number: 4, subject: "Англійська мова", time: "11:55 - 12:40" },
  ],
  "Вівторок": [
    { number: 1, subject: "Навчання грамоти", time: "9:00 - 9:45" },
    { number: " ", subject: "Перерва", time: "9:45 - 9:55" },
    { number: 2, subject: "Навчання грамоти", time: "9:55 - 10:40" },
    { number: " ", subject: "Перерва", time: "10:40 - 10:50" },
    { number: 3, subject: "Математика", time: "10:50 - 11:35" },
    { number: " ", subject: "Обід 1-4 класи", time: "11:35 - 11:55" },
    { number: 4, subject: "Przyroda", time: "11:55 - 12:40" },
    { number: " ", subject: "Обід 5-6 класи", time: "12:40 - 13:00" },
    { number: 5, subject: "Plastyka", time: "13:00 - 13:45" },
  ],
  "Середа": [
    { number: 1, subject: "Навчання грамоти", time: "9:00 - 9:45" },
    { number: " ", subject: "Перерва", time: "9:45 - 9:55" },
    { number: 2, subject: "Математика", time: "9:55 - 10:40" },
    { number: " ", subject: "Перерва", time: "10:40 - 10:50" },
    { number: 3, subject: "Jezyk Polski", time: "10:50 - 11:35" },
    { number: " ", subject: "Обід 1-4 класи", time: "11:35 - 11:55" },
    { number: 4, subject: "Англійська мова", time: "11:55 - 12:40" },
    { number: " ", subject: "Обід 5-6 класи", time: "12:40 - 13:00" },
    { number: 5, subject: "Англійська мова", time: "13:00 - 13:45" },
  ],
  "Четвер": [
    { number: 1, subject: "Навчання грамоти", time: "9:00 - 9:45" },
    { number: " ", subject: "Перерва", time: "9:45 - 9:55" },
    { number: 2, subject: "Навчання грамоти", time: "9:55 - 10:40" },
    { number: " ", subject: "Перерва", time: "10:40 - 10:50" },
    { number: 3, subject: "Jezyk Polski", time: "10:50 - 11:35" },
    { number: " ", subject: "Обід 1-4 класи", time: "11:35 - 11:55" },
    { number: 4, subject: "Математика", time: "11:55 - 12:40" },
    { number: " ", subject: "Обід 5-6 класи", time: "12:40 - 13:00" },
    { number: 5, subject: "Plastyka", time: "13:00 - 13:45" },
    { number: " ", subject: "Перерва", time: "13:45 - 13:55" },
    { number: 6, subject: "Англійська мова", time: "13:55 - 14:40" },
  ],
  "П'ятниця": [
    { number: 1, subject: "Я досліджую світ", time: "9:00 - 9:45" },
    { number: " ", subject: "Перерва", time: "9:45 - 9:55" },
    { number: 2, subject: "Jezyk Polski", time: "9:55 - 10:40" },
    { number: " ", subject: "Перерва", time: "10:40 - 10:50" },
    { number: 3, subject: "Edukacja wczesnoszkolna", time: "10:50 - 11:35" },
    { number: " ", subject: "Обід 1-4 класи", time: "11:35 - 11:55" },
    { number: " ", subject: "Очікування автобусу", time: "11:55 - 12:20" },
    { number: " ", subject: "Шлях зі школи до басейну на автобусі", time: "12:20 - 12:45" },
    { number: 4, subject: "Wyhowanie фізичне (басейн)", time: "13:00 - 14:00" },
    { number: " ", subject: "Шлях з басейну до школи на автобусі", time: "14:30 - 14:55" },
  ],
};

function cacheSchedule() {
  localStorage.setItem('schedule', JSON.stringify(schedule));
}

function loadCachedSchedule() {
  const cached = localStorage.getItem('schedule');
  return cached ? JSON.parse(cached) : schedule;
}

function getCurrentLesson(daySchedule) {
  const now = new Date();
  const currentHour = now.getHours();
  const currentMinutes = now.getMinutes();
  const currentTime = currentHour * 60 + currentMinutes;

  for (let lesson of daySchedule) {
    const [start, end] = lesson.time.split(" - ").map(time => {
      const [hours, minutes] = time.split(":").map(Number);
      return hours * 60 + minutes;
    });

    if (currentTime >= start && currentTime < end) {
      if (lesson.subject === "Перерва" || lesson.subject.includes("Обід")) {
        return { type: "break", lesson };
      }
      return { type: "lesson", lesson };
    }
  }

  if (daySchedule.length > 0) {
    const lastLessonEnd = daySchedule[daySchedule.length - 1].time.split(" - ")[1];
    const [hours, minutes] = lastLessonEnd.split(":").map(Number);
    const lastLessonEndTime = hours * 60 + minutes;

    if (currentTime >= lastLessonEndTime) {
      return { type: "finished" };
    }
  }

  return null;
}

function renderCurrentLesson() {
  const daysOfWeek = ["Неділя", "Понеділок", "Вівторок", "Середа", "Четвер", "П'ятниця", "Субота"];
  const today = new Date().getDay();
  const todayName = daysOfWeek[today];
  const cachedSchedule = loadCachedSchedule();
  const daySchedule = cachedSchedule[todayName] || [];
  const currentLessonData = getCurrentLesson(daySchedule);
  const currentLessonDiv = document.getElementById("current-lesson");

  if (currentLessonData) {
    if (currentLessonData.type === "lesson") {
      const lesson = currentLessonData.lesson;
      currentLessonDiv.textContent = `Зараз урок: ${lesson.subject} (${lesson.time})`;
      if (notificationsEnabled) notifyLesson(lesson);
    } else if (currentLessonData.type === "break") {
      const lesson = currentLessonData.lesson;
      currentLessonDiv.textContent = `Зараз: ${lesson.subject} (${lesson.time})`;
    } else if (currentLessonData.type === "finished") {
      currentLessonDiv.textContent = "Заняття закінчилися.";
    }
  } else {
    currentLessonDiv.textContent = "Зараз немає уроків.";
  }
}

function renderDailySchedule(selectedDay) {
  const cachedSchedule = loadCachedSchedule();
  const daySchedule = cachedSchedule[selectedDay] || [];
  const dailyScheduleTable = document.querySelector("#daily-schedule tbody");
  dailyScheduleTable.innerHTML = '';

  daySchedule.forEach(lesson => {
    const isBreak = lesson.subject === "Перерва" || lesson.subject.includes("Обід");
    const row = `<tr class="${isBreak ? 'highlight' : ''}">
      <td>${lesson.number}</td>
      <td>${lesson.subject}</td>
      <td>${lesson.time}</td>
    </tr>`;
    dailyScheduleTable.innerHTML += row;
  });
}

function renderWeeklySchedule() {
  const daysOfWeek = ["Неділя", "Понеділок", "Вівторок", "Середа", "Четвер", "П'ятниця", "Субота"];
  const today = new Date().getDay();
  const todayName = daysOfWeek[today];
  const cachedSchedule = loadCachedSchedule();
  const weeklyScheduleTable = document.querySelector("#weekly-schedule");
  weeklyScheduleTable.innerHTML = '';

  const dayClasses = {
    "Понеділок": "monday",
    "Вівторок": "tuesday",
    "Середа": "wednesday",
    "Четвер": "thursday",
    "П'ятниця": "friday",
  };

  for (const day in cachedSchedule) {
    const dayLessons = cachedSchedule[day];
    const dayClass = dayClasses[day] || "";
    const isToday = day === todayName ? "current-day" : "";

    dayLessons.forEach((lesson, index) => {
      const isBreak = lesson.subject === "Перерва" || lesson.subject.includes("Обід");
      const rowClass = isBreak ? "highlight" : `${dayClass} ${isToday}`;

      const row = `<tr class="${rowClass}">
        ${index === 0 ? `<td rowspan="${dayLessons.length}">${day}</td>` : ''}
        <td>${lesson.number}</td>
        <td>${lesson.subject}</td>
        <td>${lesson.time}</td>
      </tr>`;
      weeklyScheduleTable.innerHTML += row;
    });
  }
}

function renderDayFilter() {
  const daysOfWeek = ["Понеділок", "Вівторок", "Середа", "Четвер", "П'ятниця"];
  const today = new Date().getDay();
  const filterContainer = document.getElementById("day-filter");
  filterContainer.innerHTML = '';

  daysOfWeek.forEach((day, index) => {
    const button = document.createElement("button");
    button.textContent = day;
    button.dataset.day = day;
    if (index + 1 === today) button.classList.add("active");
    button.addEventListener("click", () => {
      document.querySelectorAll(".day-filter button").forEach(btn => btn.classList.remove("active"));
      button.classList.add("active");
      renderDailySchedule(day);
    });
    filterContainer.appendChild(button);
  });
}

let notificationsEnabled = false;

function requestNotificationPermission() {
  if (!("Notification" in window)) {
    alert("Ваш браузер не підтримує сповіщення.");
    return;
  }

  Notification.requestPermission().then(permission => {
    if (permission === "granted") {
      notificationsEnabled = true;
      document.querySelector('.notify-toggle i').classList.replace('fa-bell', 'fa-bell-slash');
    }
  });
}

function notifyLesson(lesson) {
  if (notificationsEnabled && Notification.permission === "granted") {
    new Notification("Поточний урок", {
      body: `${lesson.subject} (${lesson.time})`,
      icon: "https://cdn-icons-png.flaticon.com/512/4751/4751951.png"
    });
  }
}

function handleTouchZoom(img) {
  let scale = 1;
  let startDistance = 0;

  img.addEventListener('touchstart', (e) => {
    if (e.touches.length === 2) {
      startDistance = Math.hypot(
        e.touches[0].pageX - e.touches[1].pageX,
        e.touches[0].pageY - e.touches[1].pageY
      );
    }
  });

  img.addEventListener('touchmove', (e) => {
    if (e.touches.length === 2) {
      const currentDistance = Math.hypot(
        e.touches[0].pageX - e.touches[1].pageX,
        e.touches[0].pageY - e.touches[1].pageY
      );
      scale = currentDistance / startDistance;
      img.style.transform = `scale(${Math.min(Math.max(scale, 1), 2)})`;
      e.preventDefault();
    }
  });

  img.addEventListener('touchend', () => {
    if (scale < 1.5) img.style.transform = 'scale(1)';
  });

  img.addEventListener('click', () => {
    if (img.style.transform === "scale(2)") {
      img.style.transform = "scale(1)";
    } else {
      img.style.transform = "scale(2)";
    }
    img.style.transition = "transform 0.3s ease";
  });
}

// Ініціалізація
const daysOfWeek = ["Неділя", "Понеділок", "Вівторок", "Середа", "Четвер", "П'ятниця", "Субота"];
const today = new Date().getDay();
renderDailySchedule(daysOfWeek[today]);
renderWeeklySchedule();
renderDayFilter();
renderCurrentLesson();
setInterval(renderCurrentLesson, 30000);
cacheSchedule();

document.querySelector('.theme-toggle').addEventListener('click', () => {
  document.body.classList.toggle('dark-theme');
  const icon = document.querySelector('.theme-toggle i');
  icon.classList.toggle('fa-moon');
  icon.classList.toggle('fa-sun');
});

document.querySelector('.notify-toggle').addEventListener('click', () => {
  if (!notificationsEnabled) {
    requestNotificationPermission();
  } else {
    notificationsEnabled = false;
    document.querySelector('.notify-toggle i').classList.replace('fa-bell-slash', 'fa-bell');
  }
});

const image = document.querySelector('.google-image');
handleTouchZoom(image);
</script>
</body>
</html>
